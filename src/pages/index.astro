---
import Layout from "../layouts/Layout.astro";
import Navbar from "../components/Navbar.astro";
import About from "../components/About.astro";
import Skills from "../components/Skills.astro";
import Projects from "../components/Projects.astro";
import DividerBottom from "../components/DividerBottom.astro";
import DividerTop from "../components/DividerTop.astro";
import { Icon } from "astro-icon";

function calculateDaysUntilBirthday() {
    var today = new Date();
    var currentYear = today.getFullYear();
    var birthday = new Date(currentYear, 0, 18);

    if (
        today.getMonth() > birthday.getMonth() ||
        (today.getMonth() === birthday.getMonth() &&
            today.getDate() >= birthday.getDate())
    ) {
        birthday.setFullYear(currentYear + 1);
    }

    var timeDiff = birthday.getTime() - today.getTime();
    var daysLeft = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));

    if (daysLeft > 30) {
        var monthsLeft = Math.floor(daysLeft / 30);
        return monthsLeft + " months";
    } else {
        return daysLeft + " days";
    }
}

function calculateAge() {
    var today = new Date();
    var birthdate = new Date(2006, 0, 18);

    var age = today.getFullYear() - birthdate.getFullYear();
    if (
        today.getMonth() < birthdate.getMonth() ||
        (today.getMonth() === birthdate.getMonth() &&
            today.getDate() < birthdate.getDate())
    ) {
        age--;
    }

    return age;
}
---

<Layout title="Ayush Sehrawat">
    <Navbar />
    <main class="flex flex-col items-start font-varela-round text-ctp-text">
        <div class="flex-row md:flex w-full p-10 md:px-24 lg:px-32">
            <div class="flex flex-col gap-4 w-full md:w-1/2 justify-center">
                <div class="flex items-center gap-8 w-full">
                    <img
                        alt="profile-picture"
                        src="/mini.webp"
                        class="rounded-3xl w-28 h-28"
                    />
                    <div class="flex flex-col gap-4">
                        <h1 class="text-4xl md:text-5xl">
                            Hi, I'm <span
                                class="decoration-wavy underline text-ctp-maroon hover:text-ctp-red transition duration-300 ease-in-out"
                                >Ayush</span
                            >
                            -
                        </h1>
                        <p class="text-3xl md:text-4xl text-ctp-subtext1">
                            Full Stack Developer
                        </p>
                    </div>
                </div>
                <div
                    class="flex flex-col gap-2 items-start w-full text-ctp-subtext0"
                >
                    <div class="flex gap-2 items-center">
                        <Icon name="SmileyWink" height="24" width="24" />
                        <p class="">He/Him</p>
                    </div>
                    <div class="flex gap-2 items-center">
                        <Icon name="Cake" height="24" width="24" />
                        <p class="">
                            18 January 2006 ({() => calculateAge()} y/o) - {
                                () => calculateDaysUntilBirthday()
                            } left
                        </p>
                    </div>
                    <div class="flex gap-2 items-center">
                        <Icon name="Maps" height="24" width="24" />
                        <p class="">New Delhi, India</p>
                    </div>
                    <div class="flex gap-2 items-center">
                        <Icon name="Language" height="24" width="24" />
                        <p class="">English, Hindi</p>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-end w-full md:w-1/2">
                <Icon name="Developer" height="512" width="512" />
            </div>
        </div>

        <DividerTop />

        <div class="flex flex-col w-full gap-16 bg-ctp-surface0">
            <About />
            <Skills />
        </div>

        <DividerBottom />

        <div class="flex flex-col gap-8 w-full p-10 md:px-24 lg:px-32">
            <Projects />
        </div>
    </main>
</Layout>
